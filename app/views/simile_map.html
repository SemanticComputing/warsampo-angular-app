<div class="row nav-btn-container" ng-show="showSettings">
  <div class="col-xs-12 form-inline">
    <!--
    <button class="btn btn-primary" ng-click="previous()">Edellinen</button>
    -->
    <label for="photo-days-before">Valokuvien aikahaarukka <input ng-change="fetchImages()" min="0" name="photo-days-before" class="form-control input-short" type="number" ng-model="photoDaysBefore" /> päivää ennen</label>
    <label for="photo-days-after"><input ng-change="fetchImages()" min="0" name="photo-days-after" class="form-control input-short" type="number" ng-model="photoDaysAfter" /> päivää jälkeen tapahtuman.</label>
    <label for="photo-place"><input ng-change="fetchImages()" min="0" name="photo-place" class="form-control" type="CHECKBOX" ng-model="photoPlace" /> Rajoita kuvienottopaikka samaan kuntaan tapahtumien kanssa.</label>
    <label for="photo-place"><input ng-change="updateHeatmap()" name="heatmap-toggle" class="form-control" type="CHECKBOX" ng-model="showCasualtyHeatmap" /> Näytä lämpökartta menehtyneistä.</label>
  </div>
  <!--
  <div class="col-md-2">
    <button class="btn btn-primary" ng-click="next()">Seuraava</button>
  </div>
    -->
</div>
<div class="row image-container" id="images">
  <div class="col-md-12" ng-show="imageCount">
  </div>
</div>
<div class="row">
  <div class="col-lg-7 col-md-12">
    <div id="timemap" ng-show="!showPhotos" class="animate-right">
      <div id="timelinecontainer">
        <div id=timeline></div>
      </div>
      <div id="mapcontainer">
        <div id="map"></div>
      </div>
    </div>
    <div ng-if="showPhotos" class="animate-paginate">
      <figure ng-repeat="img in currentImages"
        class="pull-left gap-right animate-image">
        <img ng-src="{{ img.url }}" />
        <figcaption>{{ img.description }} (<i>{{ img.created }} SA-kuva</i>)</figcaption>
      </figure>
    </div>
  </div>
  <div class="col-lg-5 col-md-12">
    <div class="row" ng-show="current">
      <div class="col-md-12">
        <h3>{{ current.opts.descTitle }}</h3>
        <p>{{ current.opts.description }}</p>
        <div ng-show="images.length === 0">
          <p ng-if="!isLoadingImages">
          Ei tapahtumaan liittyviä kuvia.
          </p>
          <p ng-if="isLoadingImages">
          Haetaan kuvia <img ng-src="images/loading.gif" />
          </p>
        </div>
        <div ng-show="!isLoadingImages && imageCount">
          <p ng-click="showPhotos = !showPhotos" ng-show="!showPhotos">
          Näytä kuvat ({{ images.length }})
          </p>
          <p ng-show="showPhotos" ng-click="showPhotos = !showPhotos">
          Piilota kuvat
          </p>
          <div ng-show="showPhotos">
            <pagination 
            class="pagination-sm"
            items-per-page="imagePageSize"
            max-size="10"
            previous-text="&lsaquo;"
            next-text="&rsaquo;"
            first-text="&laquo;"
            last-text="&raquo;"
            boundary-links="true"
            rotate="false"
            total-items="imageCount"
            ng-model="currentImagePage"
            ng-change="imagePageChanged()">
            </pagination>
          </div>
        </div>
        <hr/>
        <div id="casualtyCount" ng-click="showCasualtyStats = !showCasualtyStats">
          <p>Menehtyneitä ajanjaksolla {{ minVisibleDate.toLocaleDateString() }} - {{ maxVisibleDate.toLocaleDateString() }}: {{ casualtyCount }}</p>
        </div>
        <div class="row animate-top" ng-if="showCasualtyStats" ng-repeat="casualtyClass in casualtyStats">
          <div ng-if="casualtyClass.id">
            <div class="col-xs-10 casualtyCount">
              {{ casualtyClass.description }}
            </div>
            <div class="col-xs-2 casualtyCount">
              {{ casualtyClass.count }}
            </div>
          </div>
        </div>
        <div class="row" ng-repeat="person in current.related_people">
          <div class="col-md-12" style="text-transform: capitalize">
            <h4>
              {{ person.sotilasarvo.toLowerCase() }} {{ person.etunimet.toLowerCase() }} {{ person.sukunimi.toLowerCase() }}
            </h4>
            <div class="row">
              <div class="col-xs-6">
                Kuolinaika:
              </div>
              <div class="col-xs-6">
                {{ person.kuolinaika }}
              </div>
            </div>
            <div class="row">
              <div class="col-xs-6">
                Kuolinpaikka:
              </div>
              <div class="col-xs-6">
                {{ person.kuolinpaikka }}
              </div>
            </div>
            <div class="row">
              <div class="col-xs-6">
                Menehtymisluokka:
              </div>
              <div class="col-xs-6" style="text-transform: none">
                {{ person.menehtymisluokka }}
              </div>
            </div>
            <div class="row">
              <div class="col-xs-6">
                Ammatti:
              </div>
              <div class="col-xs-6">
                {{ person.ammatti }}
              </div>
            </div>
            <div class="row">
              <div class="col-xs-6">
                Siviilisääty:
              </div>
              <div class="col-xs-6">
                {{ person.siviilisaeaety }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

