<div class="row">
  <div class="col-lg-5 col-lg-push-7 col-md-12">
    <div class="row">
      <div class="col-md-12">
        <div ng-if="timemapCtrl.current">
          <h3>
            <span ng-repeat="place in timemapCtrl.current.opts.event.places">
              <a page-link="place.id">{{ place.label }}</a>{{ $last ? ' ' : ', ' }}
            </span>
            {{ timemapCtrl.current.opts.descTitle }} - {{ timemapCtrl.current.opts.event.type }}
          </h3>
          <p>{{ timemapCtrl.current.opts.description }}</p>
          <p ng-repeat="person in timemapCtrl.current.commanders" style="text-transform: capitalize">
          <a page-link="person.id">{{ person.label }}</a>
          </p>
          <p ng-repeat="unit in timemapCtrl.current.units" style="text-transform: capitalize">
            {{ unit.label.join(' / ') }}
          </p>
          <p><a page-link="timemapCtrl.current.opts.event.id">Näytä tapahtuman tietosivu</a></p>
          <div ng-show="timemapCtrl.images.length === 0">
            <p ng-if="!timemapCtrl.isLoadingImages">
            Ei tapahtumaan liittyviä kuvia.
            </p>
            <p ng-if="timemapCtrl.isLoadingImages">
            Haetaan kuvia <img src="images/loading.gif" />
            </p>
          </div>
          <div ng-show="!timemapCtrl.isLoadingImages && timemapCtrl.images.length">
            <p>
            {{ timemapCtrl.images.length }} kuvaa
            </p>
            <photo-scroller images="timemapCtrl.images"></photo-scroller>
          </div>
        </div>
        <div ng-if="timemapCtrl.isLoadingTimemap">
          <h3>Rakennetaan aikajanaa <img src="images/loading.gif" /></h3>
        </div>
        <div ng-show="!timemapCtrl.isLoadingTimemap">
          <div ng-if="!timemapCtrl.current">
            <h1>{{ timemapCtrl.title }}</h1>
            <h3>Valitse tapahtuma aikajanalta tai kartalta.</h3>
            <p>
            Aikajanaa voi liikuttaa vetämällä hiirellä.
            Asetuksia, kuten valokuvien haun aikahaarkukkaa, voi muuttaa valitsemalla yläpalkista "Asetukset".
            Tekstiltään sinisiin tapahtumiin liittyy valokuvia (asetusten mukaisesti).
            </p>
            <p>
            Kartalla näkyvät kullakin hetkellä (alemmalla) aikajanalla näkyvissä olevat tapahtumat, jos niiden paikka on tiedossa.
            Lisäksi kartalla näkyy lämpökartta (alemmalla) aikajanalla näkyvällä ajanjaksolla sodassa menehtyneistä suomalaisista.
            </p>
            <h4>Tapahtumien värikoodit</h4>
            <p><img src="vendor/timemap/images/red-circle.png"> Sotatoimi</p>
            <p><img src="vendor/timemap/images/purple-circle.png"> Poliittinen tapahtuma</p>
            <p><img src="vendor/timemap/images/orange-circle.png"> Muu tapahtuma</p>
            <p><img src="vendor/timemap/images/green-circle.png"> Tällä hetkellä valittu tapahtuma</p>
          </div>
          <hr/>
          <div id="casualtyCount" ng-click="timemapCtrl.showCasualtyStats = !timemapCtrl.showCasualtyStats">
            <p>Menehtyneitä ajanjaksolla {{ timemapCtrl.minVisibleDate.toLocaleDateString() }} - {{ timemapCtrl.maxVisibleDate.toLocaleDateString() }}: {{ timemapCtrl.casualtyCount }}</p>
          </div>
          <div class="row animate-text" ng-if="timemapCtrl.showCasualtyStats" ng-repeat="casualtyClass in timemapCtrl.casualtyStats">
            <div ng-if="casualtyClass.id">
              <div class="col-xs-10 casualtyCount">
                {{ casualtyClass.description }}
              </div>
              <div class="col-xs-2 casualtyCount">
                {{ casualtyClass.count }}
              </div>
            </div>
          </div>
          <div class="row" ng-repeat="person in timemapCtrl.current.related_people">
            <div class="col-md-12" style="text-transform: capitalize">
              <h4>
                {{ person.sotilasarvo.toLowerCase() }} {{ person.etunimet.toLowerCase() }} {{ person.sukunimi.toLowerCase() }}
              </h4>
              <div class="row">
                <div class="col-xs-6">
                  Kuolinaika:
                </div>
                <div class="col-xs-6">
                  {{ person.kuolinaika }}
                </div>
              </div>
              <div class="row">
                <div class="col-xs-6">
                  Kuolinpaikka:
                </div>
                <div class="col-xs-6">
                  {{ person.kuolinpaikka }}
                </div>
              </div>
              <div class="row">
                <div class="col-xs-6">
                  Menehtymisluokka:
                </div>
                <div class="col-xs-6" style="text-transform: none">
                  {{ person.menehtymisluokka }}
                </div>
              </div>
              <div class="row">
                <div class="col-xs-6">
                  Ammatti:
                </div>
                <div class="col-xs-6">
                  {{ person.ammatti }}
                </div>
              </div>
              <div class="row">
                <div class="col-xs-6">
                  Siviilisääty:
                </div>
                <div class="col-xs-6">
                  {{ person.siviilisaeaety }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-7 col-lg-pull-5 col-md-12">
    <div id="timemap" class="animate-right">
      <div id="mapcontainer">
        <div id="map"></div>
      </div>
      <div id="timelinecontainer">
        <div id=timeline></div>
      </div>
    </div>
  </div>
</div>
