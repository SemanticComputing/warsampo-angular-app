<ws-title>{{ ctrl.currentObject.getLabel() }}</ws-title>
<ws-settings></ws-settings>
<div class="row">
  <div class="col-sm-3">
  	<h2 translate>UNIT_DEMO.TITLE</h2>
    <translate>UNIT_DEMO.DESCRIPTION</translate>
    <input type="text"
      ng-model-options="{ debounce: 500 }"
      placeholder="{{ 'UNIT_DEMO.SEARCH_BOX_PLACEHOLDER' | translate }}"
      class="form-control" ng-model="ctrl.queryregex" ng-change="ctrl.getItems()" />
    <select ng-model="ctrl.currentSelection" ng-change="ctrl.updateUnit()"
      size="32" class="form-control" id="unitselect"
      ng-options="item.id as item.name for item in ctrl.items">
    </select>
	</div>

  <div class="col-sm-9">
    <div class="row">
      <div class="col-lg-5 col-lg-push-7 col-md-12">
        <div class="row">
          <div class="col-md-12">
            <div ng-switch="ctrl.showUnitDetails()">
              <div ng-switch-when="true">
                <!-- Unit details -->
                <h3>{{ ctrl.currentObject.getLabel() }} <span ng-if="ctrl.currentObject.abbrev.length"> â€“ {{ ctrl.currentObject.abbrev | concatList }}</span></h3>
                <p ng-if="ctrl.currentObject.altNames.length"><span translate>UNIT_DEMO.UNIT_AKA</span> {{ ctrl.currentObject.altNames.join('; ') }}</p>
                <p ng-if="ctrl.currentObject.getDescription()">{{ ctrl.currentObject.getDescription() }} (Wikipedia)</p>
                <p><a ws-page-link="ctrl.currentObject.id" translate>SHOW_INFO_PAGE</a></p>

                <ws-photo-gallery images="ctrl.currentObject.images"></ws-photo-gallery>

                <ws-related-links-paged data-title="'RELATED_PEOPLE' | translate" data-paginator="ctrl.currentObject.relatedPersons"></ws-related-links-paged>
                <ws-related-links data-title="'SUPER_UNITS' | translate" data-related="ctrl.currentObject.superUnits"></ws-related-links>
                <ws-related-links data-title="'SUB_UNITS' | translate" data-related="ctrl.currentObject.subUnits"></ws-related-links>
                <ws-related-links data-title="'OTHER_UNITS' | translate" data-related="ctrl.currentObject.relatedUnits"></ws-related-links>
                <ws-related-links data-title="'RELATED_BATTLES' | translate" data-related="ctrl.currentObject.battles"></ws-related-links>
                <ws-related-links data-title="'RELATED_PLACES' | translate" data-related="ctrl.currentObject.places"></ws-related-links>
                <ws-related-links data-title="'KANSA_TAISTELI_ARTICLES' | translate" data-related="ctrl.currentObject.articles"></ws-related-links>
                <ws-related-links data-external data-title="'Wikipedia'" data-related="ctrl.currentObject.wikilink"></ws-related-links>
                <ws-related-links data-external data-title="'WAR_DIARIES' | translate" data-related="ctrl.currentObject.diaries"></ws-related-links>

              </div>
              <div ng-switch-default>
                <div ng-if="ctrl.isLoadingEvent">
                  <h3>{{ 'LOADING' | translate}} <img src="images/loading.gif" /></h3>
                </div>
                <div ng-show="!ctrl.isLoadingEvent">
                  <h3><a href="" ng-click="ctrl.clearEvent()">{{ ctrl.currentObject.getLabel() }}</a></h3>
                  <event-details data-event=ctrl.getCurrent()></event-details>
                  <p><a ws-page-link="ctrl.getCurrent().id" translate>SHOW_INFO_PAGE</a></p>
                  <ws-photo-gallery data-images="ctrl.getImages()"></ws-photo-gallery>
                </div>
              </div>
            </div>
            <hr/>
            <!-- Casualty statistics -->
            <div ng-include="'views/partials/casualty_stats_partial.html'"></div>
          </div>
        </div>
      </div>
      <div class="col-lg-7 col-lg-pull-5 col-md-12">
        <div ng-if="ctrl.err">
          <p class="error-msg bg-danger">
          {{ 'ERROR_OCCURED' | translate }} <br /><br />
          <b>{{ ctrl.err }}</b> <br /><br />
          <a ng-href="{{ ctrl.getDefaultUrl() }}" target="_self" translate>UNIT_DEMO.GO_HOME</a>
          </p>
        </div>
        <div ng-include="'views/partials/timemap_partial.html'"></div>
      </div>
    </div>
  </div>
</div>
